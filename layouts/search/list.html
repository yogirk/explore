{{ define "main" }}
<div class="container">
  <header class="page-header">
    <h1>{{ .Title }}</h1>
  </header>

  {{ $searchEngine := .Site.Params.ui.searchEngine | default "pagefind" }}

  {{ if eq $searchEngine "pagefind" }}
    <div id="pagefind-search"></div>
    {{ $js := resources.Get "js/search-pagefind.js" | resources.Minify }}
    <script src="{{ $js.RelPermalink }}" defer></script>
    <!-- Pagefind requires its own JS file, typically generated by the pagefind CLI -->
    <!-- Make sure to run `npx pagefind` after `hugo` build -->
    <link href="/pagefind/pagefind-ui.css" rel="stylesheet">
  {{ else if eq $searchEngine "algolia" }}
    <div id="search-box"></div>
    <div id="search-hits"></div>
    <script>
      window.algoliaConfig = {{ .Site.Params.algolia | jsonify }};
    </script>
    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.20.0/dist/algoliasearch-lite.umd.js" integrity="sha256-DAB8e4wEZLAiAsoSg3u+vxxJ+bDYi4L+9g1y2T2OLw4=" crossorigin="anonymous" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.60.0/dist/instantsearch.production.min.js" integrity="sha256-9242vN3wYlJAy1D9CViGjGkHCaLdJv22v22c2049HOU=" crossorigin="anonymous" defer></script>
    {{ $js := resources.Get "js/search-algolia.js" | resources.Minify }}
    <script src="{{ $js.RelPermalink }}" defer></script>
  {{ else }}
    <p>Invalid search engine configured.</p>
  {{ end }}

</div>
{{ end }}
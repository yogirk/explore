/*--------------------------------------------------------------
# THEME: EXPLORE
# DESCRIPTION: A minimal, text-focused theme for Hugo.
# VERSION: 1.1.0
#--------------------------------------------------------------*/

/*--------------------------------------------------------------
# 1.0 DESIGN TOKENS
#--------------------------------------------------------------*/

/* 1.0a Font Faces */
{{ $fontPreset := .Site.Params.style.fontPreset | default "inter" }}

{{ if eq $fontPreset "google-sans" }}
@font-face {
  font-family: 'Google Sans Flex';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('{{ "fonts/google-sans-flex-regular.woff2" | relURL }}') format('woff2');
}
@font-face {
  font-family: 'Google Sans Flex';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('{{ "fonts/google-sans-flex-bold.woff2" | relURL }}') format('woff2');
}
@font-face {
  font-family: 'Google Sans Code';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('{{ "fonts/google-sans-code-regular.woff2" | relURL }}') format('woff2');
}
{{ else }}
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('{{ "fonts/inter-regular.woff2" | relURL }}') format('woff2');
}
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('{{ "fonts/inter-bold.woff2" | relURL }}') format('woff2');
}
@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('{{ "fonts/jetbrains-mono-regular.woff2" | relURL }}') format('woff2');
}
{{ end }}

/* 1.1 Primitive Tokens - Raw palette values, no context */
:root {
  // Colors - injected from Hugo config (palette-aware)
  {{ $palette := .Site.Params.style.palette | default "default" }}
  {{ if eq $palette "ocean" }}
  --color-blue-600: #0077b6;
  --color-green-600: #00838f;
  {{ else if eq $palette "forest" }}
  --color-blue-600: #2d6a4f;
  --color-green-600: #52b788;
  {{ else if eq $palette "slate" }}
  --color-blue-600: #475569;
  --color-green-600: #64748b;
  {{ else }}
  --color-blue-600: {{ .Site.Params.style.primary | default "#1a73e8" }};
  --color-green-600: {{ .Site.Params.style.accent | default "#1e8e3e" }};
  {{ end }}

  // Colors - cool gray palette (blue undertone)
  --color-gray-900: #202124;
  --color-gray-800: #3c4043;
  --color-gray-700: #5f6368;
  --color-gray-600: #70757a;
  --color-gray-400: #9aa0a6;
  --color-gray-300: #dadce0;
  --color-gray-200: #e8eaed;
  --color-gray-100: #f1f3f4;
  --color-gray-50: #f8f9fa;
  --color-white: #ffffff;

  // Colors - warning
  --color-yellow-700: #f9ab00;

  // Dark palette - soft charcoal (not pure black)
  --color-dark-50: #e8eaed;
  --color-dark-100: #bdc1c6;
  --color-dark-200: #9aa0a6;
  --color-dark-300: #80868b;
  --color-dark-400: #5f6368;
  --color-dark-500: #3c4043;
  --color-dark-600: #303134;
  --color-dark-700: #282a2d;
  --color-dark-800: #202124;
  --color-dark-900: #171717;

  // Typography - primitives
  {{ $fontPreset := .Site.Params.style.fontPreset | default "inter" }}
  {{ if eq $fontPreset "google-sans" }}
  --font-sans: 'Google Sans Flex', -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
  {{ else }}
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", sans-serif;
  {{ end }}
  --font-serif: "Iowan Old Style", "Apple Garamond", "Baskerville",
    "Times New Roman", "Droid Serif", "Times", "Source Serif Pro", serif;
  {{ if eq $fontPreset "google-sans" }}
  --font-mono: 'Google Sans Code', "Menlo", "Consolas", "Monaco", monospace;
  {{ else }}
  --font-mono: 'JetBrains Mono', "Menlo", "Consolas", "Monaco", monospace;
  {{ end }}

  // Spacing - raw scale
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-4: 1rem;
  --space-8: 2rem;
  --space-16: 4rem;

  // Type scale - Minor Third (1.2 ratio)
  --text-xs: 0.694rem;
  --text-sm: 0.833rem;
  --text-base: 1rem;
  --text-lg: 1.2rem;
  --text-xl: 1.44rem;
  --text-2xl: 1.728rem;
  --text-3xl: 2.074rem;
  --text-4xl: 2.488rem;
  --text-5xl: 2.986rem;

  // Borders & Shadows - primitives
  --radius: 4px;
  --border-width: 1px;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

  // Transitions
  --duration-fast: 0.2s;

  // Z-Index
  --z-header: 100;
  --z-modal: 200;
}

/* 1.2 Semantic Tokens - Purpose-based aliases */
:root {
  // Color roles
  --color-primary: var(--color-blue-600);
  --color-accent: var(--color-green-600);
  --color-text: var(--color-gray-900);
  --color-text-offset: var(--color-gray-700);
  --color-background: var(--color-white);
  --color-background-offset: var(--color-gray-50);
  --color-border: var(--color-gray-300);
  --color-code-bg: var(--color-gray-100);

  // Typography roles
  --font-body: var(--font-sans);
  --font-heading: var(--font-sans);
  --font-code: var(--font-mono);
  --base-font-size: 1rem;
  --line-height: 1.6;

  // Type scale roles
  --font-size-body: var(--text-base);
  --font-size-small: var(--text-sm);
  --font-size-caption: var(--text-xs);
  --font-size-code: 0.875em;
  --font-size-h1: var(--text-5xl);
  --font-size-h2: var(--text-4xl);
  --font-size-h3: var(--text-3xl);
  --font-size-h4: var(--text-2xl);
  --font-size-h5: var(--text-xl);
  --font-size-h6: var(--text-lg);

  // Layout
  --max-width-ch: {{ .Site.Params.style.maxWidthCh | default 75 }}ch;
  --container-max-width: {{ .Site.Params.style.containerMaxWidth | default "1280px" }};

  // Spacing roles
  --space-xs: var(--space-1);
  --space-s: var(--space-2);
  --space-m: var(--space-4);
  --space-l: var(--space-8);
  --space-xl: var(--space-16);

  // Transition
  --transition-duration: var(--duration-fast);
}

/* 1.3 Component Tokens */
:root {
  // Header
  --header-bg: var(--color-background);
  --header-border: var(--color-border);
  --header-shadow: var(--shadow-md);

  // Footer
  --footer-bg: var(--color-background-offset);
  --footer-border: var(--color-border);

  // Cards / Related posts
  --card-border: var(--color-border);

  // Widgets
  --widget-title-border: var(--color-border);

  // Hero
  --hero-bg: var(--color-background-offset);

  // Callouts
  --callout-info-bg: rgba(26, 115, 232, 0.08);
  --callout-info-border: var(--color-primary);
  --callout-warning-bg: rgba(249, 171, 0, 0.08);
  --callout-warning-border: var(--color-yellow-700);

  // Code / Syntax highlighting
  --chroma-bg: var(--color-code-bg);
}

/* 1.4 Dark Mode - Override semantic tokens */
[data-theme="dark"] {
  // Brighten primary/accent for dark background contrast (palette-aware)
  {{ $palette := .Site.Params.style.palette | default "default" }}
  {{ if eq $palette "ocean" }}
  --color-primary: #90e0ef;
  --color-accent: #48cae4;
  {{ else if eq $palette "forest" }}
  --color-primary: #95d5b2;
  --color-accent: #b7e4c7;
  {{ else if eq $palette "slate" }}
  --color-primary: #94a3b8;
  --color-accent: #cbd5e1;
  {{ else }}
  --color-primary: #8ab4f8;
  --color-accent: #81c995;
  {{ end }}
  --color-yellow-700: #fdd663;

  // Semantic color overrides - layered surfaces
  --color-text: var(--color-dark-50);
  --color-text-offset: var(--color-dark-200);
  --color-background: var(--color-dark-900);
  --color-background-offset: var(--color-dark-800);
  --color-border: var(--color-dark-500);
  --color-code-bg: var(--color-dark-700);

  // Component token overrides for dark mode
  --callout-info-bg: rgba(138, 180, 248, 0.1);
  --callout-warning-bg: rgba(253, 214, 99, 0.1);

  // Chroma syntax highlighting adjustments
  --chroma-bg: var(--color-dark-700);
}

/*--------------------------------------------------------------
# 2.0 BASE
#--------------------------------------------------------------*/
*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  font-size: var(--base-font-size);
  line-height: var(--line-height);
  -webkit-text-size-adjust: 100%;
  tab-size: 4;
}

/* Prevent body scroll when mobile menu is open */
html.is-menu-open {
  overflow: hidden;
}

body {
  font-family: var(--font-body);
  color: var(--color-text);
  background-color: var(--color-background);
  margin: 0;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  transition: background-color var(--transition-duration) ease, color var(--transition-duration) ease;
}

main {
  flex-grow: 1;
}

img, svg, video, canvas, audio, iframe, embed, object {
  display: block;
  max-width: 100%;
}

img {
  height: auto;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--transition-duration) ease, text-decoration var(--transition-duration) ease;
}

a:hover {
  color: var(--color-accent);
  text-decoration: underline;
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-heading);
  font-weight: 700;
  line-height: 1.2;
  margin-top: 2em;
  margin-bottom: 0.8em;
}

h1 { font-size: var(--font-size-h1); }
h2 { font-size: var(--font-size-h2); }
h3 { font-size: var(--font-size-h3); }
h4 { font-size: var(--font-size-h4); }
h5 { font-size: var(--font-size-h5); }
h6 { font-size: var(--font-size-h6); }

p {
  margin-top: 0;
  margin-bottom: var(--space-m);
}

ul, ol {
  padding-left: 1.5em;
  margin-bottom: var(--space-m);
}

blockquote {
  margin: var(--space-l) 0;
  padding: var(--space-m) var(--space-l);
  border-left: 3px solid var(--color-primary);
  background-color: var(--color-background-offset);
  border-radius: 0 var(--radius) var(--radius) 0;
  color: var(--color-text);
  font-style: normal;
}

blockquote p:last-child {
  margin-bottom: 0;
}

blockquote cite,
blockquote footer {
  display: block;
  margin-top: var(--space-s);
  font-size: var(--text-sm);
  color: var(--color-text-offset);
  font-style: italic;
}

blockquote cite::before,
blockquote footer::before {
  content: "\2014\00a0";
}

strong, b {
  font-weight: 700;
}

em, i {
  font-style: italic;
}

hr {
  border: 0;
  border-top: var(--border-width) solid var(--color-border);
  margin: var(--space-xl) auto;
  max-width: 5rem;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: var(--space-l);
  font-size: var(--text-sm);
}

th, td {
  padding: var(--space-s) var(--space-m);
  text-align: left;
  border-bottom: var(--border-width) solid var(--color-border);
}

th {
  font-weight: 700;
  font-family: var(--font-heading);
  color: var(--color-text);
}

thead th {
  border-bottom-width: 2px;
}

tbody tr:last-child td {
  border-bottom: none;
}

code, pre {
  font-family: var(--font-code);
  font-size: var(--font-size-code);
}

:not(pre) > code {
  font-family: var(--font-code);
  font-size: var(--font-size-code);
  background-color: var(--color-code-bg);
  padding: 0.15em 0.4em;
  border-radius: var(--radius);
  border: var(--border-width) solid var(--color-border);
  word-break: break-word;
}

pre {
  background-color: var(--color-code-bg);
  padding: var(--space-m);
  border-radius: var(--radius);
  overflow-x: auto;
  margin-bottom: var(--space-l);
  border: var(--border-width) solid var(--color-border);
  line-height: 1.5;
}

pre code {
  font-size: var(--font-size-code);
  background: none;
  padding: 0;
  border: none;
  border-radius: 0;
}

.footnotes {
  margin-top: var(--space-xl);
  padding-top: var(--space-l);
  border-top: var(--border-width) solid var(--color-border);
  font-size: var(--text-sm);
  color: var(--color-text-offset);
}

.footnotes ol {
  padding-left: var(--space-l);
}

.footnotes li {
  margin-bottom: var(--space-s);
}

.footnotes p {
  margin-bottom: var(--space-xs);
}

.footnote-ref {
  font-size: var(--text-xs);
  vertical-align: super;
  line-height: 0;
  text-decoration: none;
}

.footnote-backref {
  text-decoration: none;
  font-size: var(--text-xs);
}

kbd {
  font-family: var(--font-code);
  font-size: var(--font-size-code);
  background-color: var(--color-background-offset);
  border: var(--border-width) solid var(--color-border);
  border-bottom-width: 2px;
  border-radius: var(--radius);
  padding: 0.1em 0.4em;
}

/* Accessibility */
:focus-visible {
  outline: 2px solid var(--color-accent);
  outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/*--------------------------------------------------------------
# 3.0 LAYOUT
#--------------------------------------------------------------*/
.container {
  max-width: var(--container-max-width);
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--space-m);
  padding-right: var(--space-m);
}

.site-main {
  padding-top: var(--space-l);
  padding-bottom: var(--space-l);
}

.site-main > .page-content {
  max-width: var(--max-width-ch);
  margin-left: auto;
  margin-right: auto;
  margin-bottom: var(--space-l);
  text-align: center;
  font-size: var(--text-lg);
}

.layout-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-l);
}

@media (min-width: 960px) {
  .layout-grid--sidebar-right {
    grid-template-columns: minmax(0, 3fr) minmax(280px, 1fr);
  }
  .layout-grid--sidebar-left {
    grid-template-columns: minmax(280px, 1fr) minmax(0, 3fr);
  }
  .main-content--sidebar-left {
    order: 2;
  }
}

/*--------------------------------------------------------------
# 4.0 COMPONENTS
#--------------------------------------------------------------*/

/* 4.1 Header */
.site-header {
  background-color: var(--header-bg);
  border-bottom: var(--border-width) solid var(--header-border);
  padding: var(--space-s) 0;
  transition: box-shadow var(--transition-duration) ease;
}

.site-header.is-sticky {
  position: sticky;
  top: 0;
  z-index: var(--z-header);
}

.site-header.has-shadow {
  box-shadow: var(--header-shadow);
}

.header-inner {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.site-identity {
  /* Allows the tagline to sit below the brand */
  line-height: 1.1;
}

.site-brand {
  font-family: var(--font-heading);
  font-weight: 700;
  font-size: var(--text-lg);
  color: var(--color-text);
  text-decoration: none;
}

.site-brand img {
  max-height: 40px; /* Adjust this value to your logo's needs */
  width: auto;
  display: block;
}

.site-brand:hover {
  color: var(--color-primary);
}

.site-tagline {
  font-size: var(--text-sm);
  margin: 0;
  color: var(--color-text-offset);
}

.nav-toggle {
  display: none;
  background: none;
  border: none;
  padding: var(--space-s);
  cursor: pointer;
  color: var(--color-text);
}

@media (max-width: 768px) {
  .nav-toggle {
    display: block;
    z-index: calc(var(--z-header) + 1);
  }
}

.nav-toggle .icon-menu,
.nav-toggle.is-active .icon-close {
  display: block;
}

.nav-toggle .icon-close,
.nav-toggle.is-active .icon-menu {
  display: none;
}

.site-nav {
  display: flex;
  align-items: center;
  gap: var(--space-s);
}

.main-nav ul {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  gap: var(--space-m);
}

.main-nav a {
  font-family: var(--font-heading);
  color: var(--color-text-offset);
  text-decoration: none;
  font-weight: 500;
  padding: var(--space-s) 0;
}

.main-nav a:hover,
.main-nav .active {
  color: var(--color-primary);
}

@media (max-width: 768px) {
  .site-nav {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--color-background);
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: var(--z-header);
  }
  .site-nav.is-active {
    display: flex;
  }
  .main-nav ul {
    flex-direction: column;
    text-align: center;
    gap: var(--space-l);
  }
  .main-nav a {
    font-size: var(--text-3xl);
  }
}

.theme-toggle {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--color-text-offset);
  padding: var(--space-s);
}
.theme-toggle:hover {
  color: var(--color-primary);
}

.theme-toggle .icon-sun,
[data-theme="dark"] .theme-toggle .icon-moon {
  display: block;
}

.theme-toggle .icon-moon,
[data-theme="dark"] .theme-toggle .icon-sun {
  display: none;
}

/* 4.2 Footer */
.site-footer {
  background-color: var(--footer-bg);
  border-top: var(--border-width) solid var(--footer-border);
  padding: var(--space-l) 0;
  font-size: var(--text-sm);
  color: var(--color-text-offset);
}

.footer-widgets {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--space-l);
  margin-bottom: var(--space-l);
}

.copyright {
  text-align: center;
  margin-top: var(--space-l);
}

/* 4.3 Widgets & Sidebar */
.sidebar .widget:last-child {
  margin-bottom: 0;
}

.widget {
  margin-bottom: var(--space-l);
}

.widget-title {
  font-family: var(--font-heading);
  font-size: var(--text-lg);
  font-weight: 700;
  margin-bottom: var(--space-m);
  border-bottom: var(--border-width) solid var(--widget-title-border);
  padding-bottom: var(--space-s);
}

.widget ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

/* Reduce spacing for list-based widgets */
.widget-recent li,
.widget-categories li {
  margin-bottom: var(--space-xs);
}

.widget-recent li a,
.widget-categories li a {
  color: var(--color-text);
  text-decoration: none;
}

.widget-recent li a:hover,
.widget-categories li a:hover {
  color: var(--color-primary);
}

.widget-tags ul {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-s);
}

.widget-tags a,
.tag-link {
  display: inline-block;
  background-color: var(--color-background-offset);
  border: var(--border-width) solid var(--color-border);
  padding: var(--space-xs) var(--space-s);
  border-radius: var(--radius);
  font-size: var(--text-sm);
  color: var(--color-text-offset);
}

.widget-tags a:hover,
.tag-link:hover {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-background);
  text-decoration: none;
}

/* 4.4 Post List */
.post-list-item {
  margin-bottom: var(--space-s);
  padding-bottom: var(--space-m);
  border-bottom: var(--border-width) solid var(--color-border);
}

.post-list-item:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

/* On pages with a sidebar, constrain the post list for readability */
.layout-grid[class*="--sidebar-"] .post-list {
  max-width: var(--max-width-ch);
  margin-left: auto;
  margin-right: auto;
}

.post-title {
  margin-top: 0;
  margin-bottom: var(--space-s);
}

.post-title a {
  color: var(--color-text);
  text-decoration: none;
}
.post-title a:hover {
  color: var(--color-primary);
}

.post-meta {
  font-size: var(--text-sm);
  color: var(--color-text-offset);
  margin-bottom: var(--space-m);
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-m);
}

.post-meta span {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.post-excerpt {
  margin-bottom: 0;
}

.post-list-item--compact {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: baseline;
  gap: var(--space-m);
  padding-bottom: var(--space-m);
}

.compact-post-link {
  text-decoration: none;
  flex-grow: 1;
  margin-right: var(--space-m);
}

.compact-post-link:hover {
  /* Ensure no underline on the container link */
  text-decoration: none;
}

.compact-post-title {
  font-family: var(--font-heading);
  font-weight: 600;
  color: var(--color-text);
  font-size: var(--text-lg);
}

.compact-post-link:hover .compact-post-title {
  color: var(--color-primary);
}

.compact-post-taxonomies {
  display: flex;
  align-items: baseline;
  flex-wrap: wrap;
  gap: var(--space-s);
  font-size: var(--text-sm);
  flex-shrink: 0;
}

.compact-post-categories {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-s);
}

.compact-post-category {
  display: inline-block;
  background-color: var(--color-background-offset);
  border: var(--border-width) solid var(--color-border);
  padding: 0 var(--space-s);
  border-radius: var(--radius);
  font-size: var(--text-sm);
  color: var(--color-text-offset);
  text-decoration: none;
  transition: all var(--transition-duration) ease;
}

.compact-post-category:hover {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-background);
  text-decoration: none;
}

.compact-post-tag {
  color: var(--color-text-offset);
  text-decoration: none;
}

.compact-post-tag:hover {
  color: var(--color-primary);
  text-decoration: none;
}

.post-excerpt-link {
  color: var(--color-text);
  text-decoration: none;
  transition: color var(--transition-duration) ease;
}

.post-excerpt-link:hover {
  color: var(--color-text-offset);
  text-decoration: none;
}

.post-excerpt-link:hover .excerpt-ellipsis {
  color: inherit;
}

.excerpt-ellipsis {
  color: var(--color-primary);
  font-weight: 600;
  transition: color var(--transition-duration) ease;
}

/* 4.5 Single Post */
.post-single .post-header {
  margin-bottom: var(--space-l);
}

.post-single .post-title {
  margin-bottom: var(--space-s);
}

.post-content {
  max-width: var(--max-width-ch);
}

.post-single .post-tags {
  margin-top: var(--space-l);
}

.post-content :is(h1, h2, h3, h4, h5, h6) {
  max-width: 100%;
}

/* 4.6 Table of Contents */
.toc {
  background: var(--color-background-offset);
  border: var(--border-width) solid var(--color-border);
  padding: var(--space-m);
  border-radius: var(--radius);
  margin-bottom: var(--space-l);
}

.toc-title {
  font-family: var(--font-heading);
  font-weight: 700;
  font-size: var(--text-lg);
  margin-top: 0;
  margin-bottom: var(--space-m);
}

.toc nav ul {
  list-style: none;
  padding-left: 0;
  font-size: var(--text-sm);
}
.toc nav ul ul {
  padding-left: var(--space-m);
}
.toc nav a {
  text-decoration: none;
  color: var(--color-text-offset);
  display: block;
  padding: var(--space-xs) 0;
}

.toc nav a:hover {
  color: var(--color-primary);
  text-decoration: none;
}

/* 4.7 Navigation (Prev/Next) */
.post-nav {
  display: flex;
  justify-content: space-between;
  margin-top: var(--space-xl);
  border-top: var(--border-width) solid var(--color-border);
  padding-top: var(--space-l);
}

.post-nav a {
  display: block;
  max-width: 48%;
  text-decoration: none;
  color: var(--color-text);
  padding: var(--space-m);
  border: var(--border-width) solid var(--color-border);
  border-radius: var(--radius);
}

.post-nav a:hover {
  border-color: var(--color-primary);
}

.post-nav .nav-label {
  font-size: var(--text-sm);
  color: var(--color-text-offset);
  display: block;
  margin-bottom: var(--space-xs);
}

.post-nav .nav-title {
  font-weight: 600;
}

.post-nav .nav-next {
  text-align: right;
  margin-left: auto;
}

/* 4.8 Related Posts */
.related-posts {
  margin-top: var(--space-xl);
  border-top: var(--border-width) solid var(--color-border);
  padding-top: var(--space-l);
}

.related-title {
  font-family: var(--font-heading);
  font-size: var(--text-3xl);
  margin-top: 0;
  margin-bottom: var(--space-l);
}

.related-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--space-m);
}

.related-card a {
  display: block;
  padding: var(--space-m);
  border: var(--border-width) solid var(--color-border);
  border-radius: var(--radius);
  height: 100%;
  text-decoration: none;
  color: var(--color-text);
}

.related-card a:hover {
  border-color: var(--color-primary);
}

.related-card-title {
  font-weight: 600;
  margin-top: 0;
  margin-bottom: var(--space-s);
}

.related-card-date {
  font-size: var(--text-sm);
  color: var(--color-text-offset);
}

/* 4.9 Pagination */
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--space-s);
  margin-top: var(--space-l);
  font-family: var(--font-heading);
}

.pagination a, .pagination span {
  padding: var(--space-s) calc(var(--space-s) * 1.5);
  border: var(--border-width) solid var(--color-border);
  border-radius: var(--radius);
  text-decoration: none;
  color: var(--color-text-offset);
}

.pagination a:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.pagination .active {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-background);
  cursor: default;
}

.pagination .disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 4.10 Shortcodes */
.callout {
  padding: var(--space-m);
  margin-bottom: var(--space-m);
  border-radius: var(--radius);
  border-left: 4px solid;
}
.callout.info {
  background-color: var(--callout-info-bg);
  border-color: var(--callout-info-border);
}
.callout.warning {
  background-color: var(--callout-warning-bg);
  border-color: var(--callout-warning-border);
}

figure {
  margin: var(--space-l) 0;
}

.figure-image-wrapper {
  background-size: cover;
  background-position: center;
  overflow: hidden;
  border-radius: var(--radius);
  position: relative;
}

.figure-image {
  width: 100%;
  height: auto;
  display: block;
  opacity: 0;
  transition: opacity 0.4s ease-in-out;
}

.figure-image-wrapper.is-loaded .figure-image {
  opacity: 1;
}

figcaption {
  font-size: var(--text-sm);
  color: var(--color-text-offset);
  text-align: center;
  margin-top: var(--space-s);
}

/* 4.11 Breadcrumbs */
.breadcrumb {
  list-style: none;
  display: flex;
  gap: var(--space-s);
  padding: 0;
  margin: 0 0 var(--space-m) 0;
  font-size: var(--text-sm);
  color: var(--color-text-offset);
}

.breadcrumb li + li::before {
  content: 'â€º';
  padding-right: var(--space-s);
  color: var(--color-text-offset);
}

/* 4.12 404 Page */
.page-404 {
  text-align: center;
  padding: var(--space-xl) var(--space-m);
}
.page-404 .read-more {
  margin-top: var(--space-l);
  display: inline-block;
}

/* 4.13 Search */
.search-input {
  width: 100%;
  padding: var(--space-m);
  font-size: var(--text-lg);
  border: var(--border-width) solid var(--color-border);
  border-radius: var(--radius);
  margin-bottom: var(--space-l);
  background-color: var(--color-background);
  color: var(--color-text);
}

.search-results .result-item {
  margin-bottom: var(--space-m);
  padding-bottom: var(--space-m);
  border-bottom: var(--border-width) solid var(--color-border);
}

.search-results .result-title {
  font-size: var(--text-xl);
  margin: 0 0 var(--space-xs) 0;
}

.search-results .result-snippet {
  color: var(--color-text-offset);
  font-size: var(--text-sm);
}

/* 4.14 Hero */
.hero-section {
  background-color: var(--hero-bg);
  padding: var(--space-xl) 0;
  text-align: center;
}

.hero-content {
  max-width: var(--max-width-ch);
  margin: 0 auto;
}

.hero-title {
  font-size: var(--text-5xl);
  margin-top: 0;
  margin-bottom: var(--space-m);
  line-height: 1.1;
}

.hero-tagline {
  font-size: var(--text-lg);
  color: var(--color-text-offset);
  margin-bottom: var(--space-l);
}

.hero-button {
  display: inline-block;
  background-color: var(--color-primary);
  color: var(--color-background);
  padding: var(--space-s) var(--space-l);
  border-radius: var(--radius);
  text-decoration: none;
  font-family: var(--font-heading);
  font-weight: 600;
  transition: background-color var(--transition-duration) ease;
}

.hero-button:hover {
  background-color: var(--color-accent);
  color: var(--color-background);
  text-decoration: none;
}

/*--------------------------------------------------------------
# 5.0 VENDOR OVERRIDES
#--------------------------------------------------------------*/

/* Syntax Highlighting (Chroma) */
.highlight {
  position: relative;
  max-width: 100%;
  margin-bottom: var(--space-l);
}

.highlight pre {
  margin-bottom: 0;
}

/* You can add more specific Chroma styles here if needed */
.chroma {
  background-color: var(--chroma-bg) !important;
  color: var(--color-text) !important;
  border-radius: var(--radius);
  padding: var(--space-m);
  overflow-x: auto;
}

/* General tokens */
.chroma .err { color: #a61717; background-color: #e3d2d2; } /* Error */
.chroma .ln { color: var(--color-text-offset) !important; } /* Line numbers */

/* Keywords */
.chroma .k, .chroma .kc, .chroma .kd, .chroma .kn, .chroma .kp, .chroma .kr, .chroma .kt { color: var(--color-primary) !important; }

/* Names */
.chroma .na, .chroma .nb, .chroma .nc, .chroma .no, .chroma .nd, .chroma .ni, .chroma .ne, .chroma .nf, .chroma .nl, .chroma .nn, .chroma .nx { color: var(--color-text); }
.chroma .nt { color: var(--color-primary); } /* Name.Tag */

/* Literals */
.chroma .s, .chroma .s1, .chroma .s2, .chroma .sb, .chroma .sc, .chroma .sd, .chroma .se, .chroma .sh, .chroma .si, .chroma .sx, .chroma .sr { color: var(--color-accent) !important; } /* String */
.chroma .m, .chroma .mf, .chroma .mh, .chroma .mi, .chroma .mo, .chroma .il { color: var(--color-accent); } /* Number */

/* Operators */
.chroma .o, .chroma .ow { color: var(--color-primary); font-weight: bold; }

/* Punctuation */
.chroma .p { color: var(--color-text); }

/* Comments */
.chroma .c, .chroma .c1, .chroma .cm, .chroma .cp, .chroma .cs { color: var(--color-text-offset) !important; font-style: italic; }

/* Dark mode Chroma overrides */
[data-theme="dark"] {
  .chroma .err { color: #fca5a5; background-color: transparent; }
  .chroma .k, .chroma .kc, .chroma .kd, .chroma .kn, .chroma .kp, .chroma .kr, .chroma .kt { color: #8ab4f8 !important; }
  .chroma .s, .chroma .s1, .chroma .s2, .chroma .sb, .chroma .sc, .chroma .sd, .chroma .se, .chroma .sh, .chroma .si, .chroma .sx, .chroma .sr { color: #81c995 !important; }
  .chroma .m, .chroma .mf, .chroma .mh, .chroma .mi, .chroma .mo, .chroma .il { color: #81c995; }
  .chroma .o, .chroma .ow { color: #8ab4f8; }
  .chroma .c, .chroma .c1, .chroma .cm, .chroma .cp, .chroma .cs { color: var(--color-dark-300) !important; }
}

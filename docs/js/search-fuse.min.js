document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("fuse-search-input"),e=document.getElementById("fuse-search-results");let n,s;fetch("/index.json").then(e=>e.json()).then(e=>{s=e,n=new Fuse(s,{keys:["title","content","tags","categories"],includeScore:!0,threshold:.3,minMatchCharLength:2})}).catch(e=>console.error("Failed to fetch search index:",e)),t.addEventListener("input",()=>{const s=t.value;if(s.length<2){e.innerHTML="";return}const i=n.search(s);o(i)});function o(t){e.innerHTML="",t.length>0?t.forEach(({item:t})=>{const n=document.createElement("article");n.className="result-item",n.innerHTML=`
          <h3 class="result-title">
            <a href="${t.uri}">${t.title}</a>
          </h3>
          <p class="result-snippet">${t.content.substring(0,150)}...</p>
        `,e.appendChild(n)}):e.innerHTML="<p>No results found.</p>"}})
# Codebase Structure

**Analysis Date:** 2026-01-28

## Directory Layout

```
explore/
├── archetypes/              # Content file templates
│   └── default.md           # Default front matter template for new posts
├── assets/                  # Hugo pipeline assets (processed at build)
│   ├── css/
│   │   └── main.scss        # Main stylesheet with CSS variables and theme
│   ├── images/
│   │   └── placeholder.png  # Placeholder image asset
│   └── js/
│       ├── minimal.js       # Core theme JS (dark mode, mobile menu)
│       ├── search-fuse.js   # Optional Fuse.js search integration
│       └── search-pagefind.js # Optional Pagefind search integration
├── data/                    # Site data files
│   └── navigation.yaml      # (Empty) Navigation data structure
├── i18n/                    # Internationalization
│   └── en.yaml              # English translation strings
├── images/                  # Static images for theme documentation
├── layouts/                 # Template files (Hugo templating)
│   ├── _default/            # Default templates for all content types
│   │   ├── baseof.html      # Base layout wrapping all pages
│   │   ├── list.html        # Template for section/category/tag lists
│   │   └── single.html      # Template for individual posts
│   ├── 404.html             # Custom 404 page template
│   ├── index.html           # Homepage template
│   ├── index.json           # JSON output for search index
│   ├── partials/            # Reusable template components
│   │   ├── analytics.html   # Google Analytics integration placeholder
│   │   ├── breadcrumbs.html # Navigation breadcrumbs
│   │   ├── footer.html      # Footer component
│   │   ├── head.html        # Head metadata and CSS processing
│   │   ├── header.html      # Header with nav, logo, theme toggle
│   │   ├── hero.html        # Optional homepage hero section
│   │   ├── pagination.html  # Pagination controls
│   │   ├── sidebar.html     # Sidebar wrapper for ToC and widgets
│   │   ├── toc.html         # Table of contents component
│   │   ├── post/            # Post-specific components
│   │   │   ├── list-item-compact.html   # Compact post list item
│   │   │   ├── list-item-default.html   # Default post list item
│   │   │   ├── prevnext.html            # Prev/next post navigation
│   │   │   └── related.html             # Related posts section
│   │   ├── seo/             # SEO metadata components
│   │   │   ├── opengraph.html    # OpenGraph/Twitter Card meta tags
│   │   │   └── schema.html       # JSON-LD structured data
│   │   └── widgets/         # Sidebar widgets (pluggable)
│   │       ├── categories.html   # Categories widget
│   │       ├── recent.html       # Recent posts widget
│   │       └── tags.html         # Tags cloud widget
│   ├── robots.txt           # SEO robots directive template
│   ├── search.html          # Search page template
│   ├── section.html         # Section-specific template (inherits list.html)
│   ├── shortcodes/          # Hugo shortcodes
│   │   ├── callout.html     # Custom callout shortcode
│   │   └── figure.html      # Custom figure shortcode
│   ├── taxonomy.html        # Taxonomy pages (categories/tags)
│   └── terms.html           # Terms listing template
├── static/                  # Static assets served as-is
│   └── images/              # Static images (favicons, logos)
├── docs/                    # Built output (generated by Hugo, published to GH Pages)
├── exampleSite/             # Example Hugo site using this theme
│   ├── config.toml          # Example configuration
│   ├── content/             # Example content files
│   │   ├── pages/           # Example static pages
│   │   ├── posts/           # Example blog posts
│   │   └── search/          # Search page setup
│   └── resources/           # Hugo resource cache
├── .planning/               # GSD planning directory
│   └── codebase/            # GSD codebase analysis documents
├── theme.toml               # Theme metadata (name, author, license)
├── README.md                # Theme documentation
└── LICENSE                  # MIT License

```

## Directory Purposes

**`archetypes/`:**
- Purpose: Define default front matter structure for new content files
- Contains: Markdown templates with YAML front matter fields
- Key files: `default.md` - base archetype for all post types

**`assets/`:**
- Purpose: Source files processed by Hugo Pipes (SCSS → CSS, minification)
- Contains: SCSS, JavaScript modules, images
- Key files: `assets/css/main.scss` (theme styling), `assets/js/minimal.js` (core interactivity)
- Note: Only files in `assets/` are processed; use `static/` for unprocessed assets

**`data/`:**
- Purpose: Structured data accessible in templates via `.Site.Data`
- Contains: YAML/TOML/JSON files
- Key files: `navigation.yaml` (structure for custom navigation if implemented)

**`i18n/`:**
- Purpose: Translation strings for multi-language support
- Contains: YAML translation files (one per language code)
- Key files: `en.yaml` - English UI strings

**`images/`:**
- Purpose: Static images used in theme documentation
- Contains: PNG, SVG assets for README and docs
- Note: Not used in generated site; for theme presentation

**`layouts/`:**
- Purpose: Template files that define page structure and rendering
- Contains: HTML with Hugo template syntax (`.html` files)
- Note: Hugo resolves templates via lookup order; see below for resolution

**`layouts/_default/`:**
- Purpose: Default templates fallback for all content types
- Contains: Generic templates for single pages, lists, sections
- Key files: `baseof.html` (inherited by all), `single.html` (individual pages), `list.html` (collections)

**`layouts/partials/`:**
- Purpose: Reusable template fragments composed into larger templates
- Contains: Component-like HTML templates
- Pattern: Called via `{{ partial "path" . }}` syntax

**`layouts/partials/post/`:**
- Purpose: Post-specific partial templates
- Contains: Post list items, navigation, related posts
- Used by: List pages, homepage, related posts sections

**`layouts/partials/seo/`:**
- Purpose: Search engine and social media metadata
- Contains: OpenGraph meta tags, JSON-LD schema
- Used by: Head partial for meta tag injection

**`layouts/partials/widgets/`:**
- Purpose: Optional sidebar content components (pluggable)
- Contains: Widget partials for recent posts, categories, tags
- Used by: Sidebar partial, loaded via configuration array

**`layouts/shortcodes/`:**
- Purpose: Custom markup for content authors (e.g., `{{< callout >}}...{{< /callout >}}`)
- Contains: HTML templates that render custom content within Markdown
- Used by: Content files via shortcode syntax

**`static/`:**
- Purpose: Serve files unchanged; copied as-is to output
- Contains: Images (favicons, logos), fonts, manifests, robots.txt
- Key files: Favicons, webmanifest for PWA

**`docs/`:**
- Purpose: Build output directory (published to GitHub Pages)
- Contains: Generated HTML, CSS, JS, images
- Generated: Yes, via Hugo build
- Committed: Yes (used for GitHub Pages deployment)

**`exampleSite/`:**
- Purpose: Complete example Hugo site demonstrating theme features
- Contains: Example configuration, content, and resources
- Key files: `config.toml` (template configuration), example content files
- Use: Copy `config.toml` to your site root to use theme

## Key File Locations

**Entry Points:**
- `layouts/index.html`: Homepage rendering
- `layouts/_default/baseof.html`: Base template for all pages
- `layouts/_default/single.html`: Individual post rendering
- `layouts/_default/list.html`: Post collection rendering
- `layouts/404.html`: Not found page

**Configuration:**
- `theme.toml`: Theme metadata (name, author, license)
- `exampleSite/config.toml`: Example site configuration (copy to your site root)

**Core Logic:**
- `layouts/_default/single.html`: Post layout logic, ToC positioning, sidebar resolution
- `layouts/_default/list.html`: List layout logic, sidebar positioning, pagination
- `layouts/partials/header.html`: Navigation, theme toggle, mobile menu
- `assets/js/minimal.js`: Theme toggle state, mobile menu toggle, sticky header
- `assets/css/main.scss`: All styling, CSS variables, responsive grid

**Testing:**
- No automated tests (static theme, unit testing not applicable)
- Manual testing: Use `exampleSite/` or your own Hugo site

## Naming Conventions

**Files:**
- HTML templates: Lowercase with hyphens: `list-item-default.html`, `related.html`
- SCSS files: Lowercase with hyphens: `main.scss`
- JavaScript files: Lowercase with hyphens: `minimal.js`, `search-fuse.js`
- Content files: Lowercase with hyphens: `hello-world.md`

**Directories:**
- All lowercase: `layouts/`, `partials/`, `assets/`, `css/`, `js/`
- Semantic grouping: `partials/post/`, `partials/widgets/`, `partials/seo/`

**Template Variables:**
- Hugo built-ins: Uppercase `.Site`, `.Page`, `.Content`
- Local vars: camelCase: `$sidebarPosition`, `$tocEnabled`, `$tocPosition`
- Parameters: Passed via dicts: `context`, `showToc`, `widgetSidebarPosition`

**CSS Classes:**
- Kebab-case: `.site-header`, `.post-single`, `.layout-grid`, `.is-active` (state)
- BEM-inspired: `.post-list-item`, `.post-title`, `.post-excerpt`
- State classes: Prefix with `is-` or `has-`: `.is-active`, `.is-menu-open`, `.has-shadow`

**Configuration Keys:**
- Nested under `[params]`: `params.sidebar.globalPosition`, `params.single.toc.enable`
- Kebab-case sections: `[params.ui]`, `[params.style]`

## Where to Add New Code

**New Feature:**
- Primary code: `layouts/` for templates, `assets/css/` for styles, `assets/js/` for scripts
- Configuration: Add new keys to `[params]` section structure
- Tests: Manual testing in `exampleSite/`

**New Component/Module:**
- Implementation: `layouts/partials/` for new partial templates
- If widget: Create file at `layouts/partials/widgets/component-name.html`, add to `params.sidebar.widgets` array in config
- If shortcode: Create file at `layouts/shortcodes/component-name.html`

**Utilities:**
- Shared template logic: Create partials in `layouts/partials/`
- Shared styles: Add to `assets/css/main.scss` (or create `assets/css/components.scss` and import)
- Shared JavaScript: Add to `assets/js/minimal.js` or create new file and include in `baseof.html`

**Content Types:**
- New section type: Create directory in `content/section-name/`
- New post type: Use same content structure, create specific layout at `layouts/section-name/` if needed
- Archetype: Create file at `archetypes/section-name.md` for custom front matter

## Special Directories

**`docs/`:**
- Purpose: Build output for GitHub Pages deployment
- Generated: Yes (Hugo output via `publishDir = "../docs"` in config)
- Committed: Yes (contains published site)

**`exampleSite/`:**
- Purpose: Standalone example Hugo site for theme demonstration
- Generated: Partially (resources/_gen/ contains Hugo pipeline cache)
- Committed: Mostly yes; exclude `resources/_gen/` and generated `docs/` folder

**`resources/`:**
- Purpose: Hugo Pipes cache for processed assets
- Generated: Yes, automatically by Hugo
- Committed: No (should be in .gitignore)

**`.planning/`:**
- Purpose: GSD (codebase mapping) analysis documents
- Generated: No (manually created)
- Committed: No (local planning directory)

## Hugo Template Resolution Order

When rendering a page, Hugo searches for templates in this order:

1. Specific layout: `layouts/posts/single.html` (exact section)
2. Type layout: `layouts/post/single.html` (section prefix)
3. Default layout: `layouts/_default/single.html` (catchall)
4. Inherited from baseof: `layouts/_default/baseof.html`

Example for post `/content/posts/my-post.md`:
- Try: `layouts/posts/single.html` → Not found
- Try: `layouts/post/single.html` → Not found
- Use: `layouts/_default/single.html` (loaded, extends baseof.html)

Example for `/content/pages/about.md`:
- Try: `layouts/pages/single.html` → Not found
- Try: `layouts/page/single.html` → Not found
- Use: `layouts/_default/single.html`

---

*Structure analysis: 2026-01-28*
